<!DOCTYPE html>
<html lang="en">

<head>
    <title>demo javascript</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>

<body>
    <p style="text-align: center; font-size: 30px;font-weight: bold; margin-top: 50px;">DEMO JAVASCRIPT</p>
    <div class="container" style="margin-top: 100px;">
        <div class="row">
            <div class="col-md-4">
                <div class="search-id">
                    <div class="form-group">
                        <div class="row">
                            <input class="form-control" type="text" id="myInput" style="width: 53%;" placeholder="ID">
                            <button type="button" class="btn btn-success" onclick="searchById()">Search by ID</button>
                        </div>
                    </div>
                </div>

                <div class="search-type">
                    <div class="form-group">
                        <div class="row">
                            <input class="form-control" type="text" id="myInput2" style="width: 50%;" placeholder="Type">
                            <button type="button" class="btn btn-success" onclick="searchByType()">Search by type</button>
                        </div>
                    </div>
                </div>
                <div class="search-price">
                    <div class="form-group">
                        <div class="row">
                            <input class="form-control" type="text" id="myInput3" style="width: 50%;" placeholder="Price">
                            <button type="button" class="btn btn-success" onclick="searchByPrice()" type="button">Search by price</button>
                        </div>
                    </div>
                </div>
                <div class="detail">
                    <div class="row">
                        <h5> ID is:</h5>
                        <h5 id="id_de" style="color: blue">
                        </h5>
                    </div>

                    <div class="row">
                        <h5> Type is:</h5>
                        <h5 id="type_de" style="color: blue">
                        </h5>
                    </div>
                    <div class="row">
                        <h5>Price is:</h5>
                        <h5 id="price_de" style="color: blue">
                        </h5>
                    </div>
                    <div class="row">
                        <h5 id="error" style="color: red">
                        </h5>
                    </div>


                </div>
            </div>

            <div class="col-md-3">
                <div class="listTable">
                    <table id="datatable" class="table table-bordered table-hover" style="width: 14%">
                        <tr>
                            <th>id</th>
                            <th>type</th>
                            <th>price</th>
                            <th>examine</th>

                        </tr>

                    </table>
                </div>
            </div>
            <div class="col-md-3">
                <div class="resultTable">
                    <table id="resultTable" class="table table-bordered table-hover" style="width: 14%">
                        <tr>
                            <th>id</th>
                            <th>type</th>
                            <th>price</th>

                        </tr>
                    </table>
                </div>
            </div>
        </div>

    </div>




    <script>
        var data = [{
            "id": 1,
            "type": "rooter1",
            "price": "1560",

        }, {
            "id": 2,
            "type": "rooter2",
            "price": "14022",

        }, {
            "id": 3,
            "type": "rooter3",
            "price": "16070",

        }, {
            "id": 4,
            "type": "rooter4",
            "price": "2000",

        }];
        var col = [];
        for (var i = 0; i < data.length; i++) {
            for (var key in data[i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
        }

        var table = document.createElement("table");
        var tr = table.insertRow(-1);


        for (var i = 0; i < col.length; i++) {
            var th = document.createElement("th");
            th.innerHTML = col[i];
            tr.appendChild(th);
        }
        var th = document.createElement("th");
        th.innerHTML = "examine";
        tr.appendChild(th);


        for (let i = 0; i < data.length; i++) {
            tr = table.insertRow(-1);
            for (let j = 0; j < col.length; j++) {
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = data[i][col[j]];
            }
            var td = document.createElement("td");
            let button = document.createElement('button');
            button.innerHTML = "Detail";
            button.className = "btn btn-success";
            button.addEventListener("click", () => {
                document.getElementById("id_de").innerHTML = data[i].id;
                document.getElementById("type_de").innerHTML = data[i].type;
                document.getElementById("price_de").innerHTML = data[i].price;

            });
            tr.appendChild(button);
        }

        var divContainer = document.getElementById("datatable");
        divContainer.innerHTML = "";
        divContainer.appendChild(table);

        function searchById() {
            var input = document.getElementById("myInput").value;
            for (i = 0; i < data.length; i++) {
                if (data[i].id == input) {
                    var col = [];
                    for (i = 0; i < data.length; i++) {
                        for (var key in data[i]) {
                            if (col.indexOf(key) === -1) {
                                col.push(key);
                            }
                        }

                    }

                }
            }
            var table = document.createElement("table");
            var tr = table.insertRow(-1);

            for (var i = 0; i < col.length; i++) {
                var th = document.createElement("th");
                th.innerHTML = col[i];
                tr.appendChild(th);
            }


            for (var i = 0; i < data.length; i++) {
                tr = table.insertRow(-1);
                if (data[i].id == input) {
                    for (var j = 0; j < col.length; j++) {
                        var tabCell = tr.insertCell(-1);
                        tabCell.innerHTML = data[i][col[j]];
                    }

                    var divContainer = document.getElementById("resultTable");
                    divContainer.innerHTML = "";
                    divContainer.appendChild(table);
                }

            }
        }

        function searchByType() {
            var input2 = document.getElementById("myInput2").value;
            for (i = 0; i < data.length; i++) {
                if (data[i].type == input2) {
                    var col = [];
                    for (i = 0; i < data.length; i++) {
                        for (var key in data[i]) {
                            if (col.indexOf(key) === -1) {
                                col.push(key);

                            }
                        }

                    }

                }
            }
            var table = document.createElement("table");
            var tr = table.insertRow(-1);
            for (var i = 0; i < col.length; i++) {
                var th = document.createElement("th");
                th.innerHTML = col[i];
                tr.appendChild(th);
            }
            for (var i = 0; i < data.length; i++) {
                tr = table.insertRow(-1);
                if (data[i].type == input2) {
                    for (var j = 0; j < col.length; j++) {
                        var tabCell = tr.insertCell(-1);
                        tabCell.innerHTML = data[i][col[j]];
                    }
                }
                var divContainer = document.getElementById("resultTable");
                divContainer.innerHTML = "";
                divContainer.appendChild(table);
            }
        }

        function searchByPrice() {
            var input3 = document.getElementById("myInput3").value;
            for (i = 0; i < data.length; i++) {
                if (data[i].price >= (parseInt(input3) - 50) && data[i].price <= (parseInt(input3) + 50)) {
                    var col = [];
                    for (i = 0; i < data.length; i++) {
                        for (var key in data[i]) {
                            if (col.indexOf(key) === -1) {
                                col.push(key);

                            }
                        }

                    }

                }

            }
            var table = document.createElement("table");
            var tr = table.insertRow(-1);

            for (var i = 0; i < col.length; i++) {
                var th = document.createElement("th");
                th.innerHTML = col[i];
                tr.appendChild(th);
            }

            // console.log(parseInt(input3) - 50);
            for (var i = 0; i < data.length; i++) {
                tr = table.insertRow(-1);
                if (data[i].price >= (parseInt(input3) - 50) && data[i].price <= (parseInt(input3) + 50)) {
                    for (var j = 0; j < col.length; j++) {
                        var tabCell = tr.insertCell(-1);
                        tabCell.innerHTML = data[i][col[j]];
                    }
                }

                var divContainer = document.getElementById("resultTable");
                divContainer.innerHTML = "";
                divContainer.appendChild(table);
            }
        }
    </script>
</body>

</html>